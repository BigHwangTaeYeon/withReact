https://velog.io/@ung6860/React-Spring-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1
ì°¸ê³ 

í¬ìŠ¤íŒ… ëª©ì 
ì´ì „ì— ë‹¤ë£¨ì—ˆë˜ React + Spring Legacy í”„ë¡œì íŠ¸ ì—°ë™ì—ì„œ ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ì—°ë™ í›„ ë°°í¬ê¹Œì§€ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì•Œì•„ë³´ê¸° ìœ„í•¨.

ê°œë°œí™˜ê²½
OS : Windows
IDE : Intellij
FrameWork : Spring Boot 2.7 / React 18.2
language : Java 11(Spring Boot 3ë²„ì „ ì´ìƒì€ ìë°” 17ë§Œ ì§€ì›)
Build : Gradle
DB : Postgresql
í”„ë¡œì íŠ¸ ìƒì„±
âš¡ï¸ Spring Boot
ğŸ–¥ï¸ Intellij Spring Boot í”„ë¡œì íŠ¸ ìƒì„±
File > New > Project



ë™ì¼í•˜ê²Œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìœ¼ë©° Spring Boot ë²„ì „ì— í˜¸í™˜ë˜ëŠ” Java ë²„ì „ì„ ì„ íƒí•˜ë©´ ëœë‹¤.
ì°¸ê³ ë¡œ Spring Boot 3 ë²„ì „ ì´ìƒë¶€í„°ëŠ” Java 17 ë²„ì „ ì´ìƒìœ¼ë¡œ ì§€ì›í•œë‹¤ê³  í•œë‹¤.

Typeì€ Build ë„êµ¬ì´ë‹ˆ ë³¸ì¸ì´ í¸í•œ ë„êµ¬ë¥¼ ì„ íƒí•˜ì—¬ ì£¼ê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ì.

ğŸ–¥ï¸ Spring Boot ë²„ì „ì„ íƒ ë° ì˜ì¡´ì„± ì¶”ê°€


ìœ„ì˜ ì„¸ê°€ì§€ê°€ ê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ì˜ì¡´ì„±ì´ë‹¤. DB Driver ë“±ì— ëŒ€í•œ ì¶”ê°€ ì„¤ì •ë„ ê°€ëŠ¥í•˜ì§€ë§Œ ì°¨í›„ì— í•„ìš”í•  ë•Œ ì¶”ê°€í•´ë„ë˜ë‹ˆ ë„˜ì–´ê°€ê² ë‹¤.
ğŸ–¥ï¸ í”„ë¡œì íŠ¸ ì„¤ì •
File > Project Structure



í”„ë¡œì íŠ¸ì˜ SDK ë²„ì „ì´ ìƒì„± ì‹œ ì„¤ì •í•œ Javaì˜ ë²„ì „ê³¼ ë™ì¼í•œì§€ í™•ì¸í•˜ê³  ë™ì¼í•˜ì§€ ì•Šë‹¤ë©´ ìˆ˜ì •í•´ì¤€ ë’¤ í™•ì¸ì„ í´ë¦­í•œë‹¤.

File > Settings > Build, Excution, Deployment > Build Tools > í•´ë‹¹ ë¹Œë“œíˆ´



Defaultë¡œ Gradleë¡œ ì‚¬ìš©í•˜ê² ë‹¤ê³  ì„¤ì •ë˜ì–´ìˆì„í…ë° ì´ ë¶€ë¶„ì„ Intellij IDEë¡œ ë°”ê¿”ì£¼ê³ , í•˜ë‹¨ì˜ Gradle JVM ë²„ì „ì„ ë™ì¼í•˜ê²Œ ë§ì¶°ì£¼ë©´ ëœë‹¤.



ë§ˆì§€ë§‰ìœ¼ë¡œ build.gradle íŒŒì¼ì„ ì—´ì–´ sourceCompatibility = '11'ê¹Œì§€ ë§ˆë¬´ë¦¬í•´ì£¼ì. ë¬¼ë¡  í•´ë‹¹ ê°’ì€ ë³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” Javaì˜ ë²„ì „ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ë©´ëœë‹¤.
ğŸ–¥ï¸ í”„ë¡œì íŠ¸ ì‹¤í–‰
ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´ Application í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰ì‹œì¼œë³´ì.


ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ì¶œë ¥ë˜ëŠ” ê²°ê³¼ì´ë‹¤. ì˜ˆì œì—ì„œì˜ Application í´ë˜ìŠ¤ ê²½ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

src > main > java > com.demo.demoproject > DemoProjectApplication
ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ http://localhost:8080 ê²½ë¡œë¡œ ì ‘ì†í•´ë³´ì.


ì—ëŸ¬í˜ì´ì§€ê°€ ì¶œë ¥ì´ ë˜ì—ˆë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ ì„œë²„ê°€ ê°€ë™ë˜ê³  ìˆëŠ” ìƒíƒœì´ë‹¤.

âš¡ï¸ React
ì´ì œ Spring Bootë¥¼ ìƒì„±í•˜ê³  ì„¤ì •í•˜ì˜€ìœ¼ë‹ˆ React í”„ë¡œì íŠ¸ë¥¼ ë‚´ë¶€ì— ìƒì„±í•´ë³´ì.

ğŸ–¥ï¸ React App ìƒì„±
cd src/main
npx create-react-app {í”„ë¡œì íŠ¸ëª…}


ì•½ 2~5ë¶„ ê°€ëŸ‰ ê¸°ë‹¤ë¦¬ë©´ í”„ë¡œì íŠ¸ ìƒì„±ì´ ì™„ë£Œë˜ê³  ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.


ğŸ–¥ï¸ React App ì‹¤í–‰
cd fronted
npm start


ìœ„ì™€ ê°™ì´ ë¦¬ì•¡íŠ¸ ì•±ì´ ì‹¤í–‰ë˜ëŠ” ëª¨ìŠµì´ ë³´ì¸ë‹¤. ë‚˜ëŠ” 3000ë²ˆ í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš©ì¤‘ì´ì–´ì„œ 3001ë²ˆìœ¼ë¡œ ì‹¤í–‰í•˜ì˜€ë‹¤. ì•„ë§ˆ ì—¬ëŸ¬ë¶„ì€ localhost:3000ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆì„ ê²ƒì´ë‹¤.

í”„ë¡œì íŠ¸ ì—°ë™
ì—¬ê¸°ê¹Œì§€ ì˜ ë”°ë¼ì™”ë‹¤ë©´ Reactì™€ Spring Bootì˜ í”„ë¡œì íŠ¸ê°€ ê°ê° 3000ë²ˆê³¼ 8080ë²ˆ í¬íŠ¸ì—ì„œ ìˆ˜í–‰ë˜ëŠ” ëª¨ìŠµê¹Œì§€ í™•ì¸í–ˆì„ ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ì œ ë‘ í”„ë¡œì íŠ¸ë¥¼ ì—°ë™ì‹œì¼œë³´ì.
âš¡ï¸ Proxy ì„¤ì •
ê¸°ë³¸ì ìœ¼ë¡œ React í”„ë¡œì íŠ¸ëŠ” 3000ë²ˆ í¬íŠ¸ì—ì„œ ì‘ë™ë˜ê¸° ë•Œë¬¸ì— CORS ê´€ë ¨í•œ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Proxyë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

CORS ì˜¤ë¥˜ì™€ ê´€ë ¨ëœ ë‚´ìš©ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´ ë™ì¼ì¶œì²˜ì—ì„œ ë°ì´í„° ìš”ì²­ì„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì´ë‹¤. Reactì™€ Springì€ localhostë¼ëŠ” ipëŠ” ê°™ì§€ë§Œ í¬íŠ¸ë²ˆí˜¸ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë™ì¼ ì¶œì²˜ë¡œ íŒë‹¨í•˜ì§€ ì•Šì•„ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì´ë‹¤.

ì´ëŸ¬í•œ ë¶€ë¶„ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ Proxy ì„¤ì •ì„ í•´ë³´ì.

//ë¯¸ë“¤ì›¨ì–´ ì„¤ì¹˜
npm install http-proxy-middleware --save
ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´ ë‹¤ìŒê²½ë¡œì— setupProxy.js íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.

//ê²½ë¡œ
src/main/fronted/src/setupProxy.js

const { createProxyMiddleware } = require('http-proxy-middleware');

module.exports = function(app) {
  app.use(
    '/api',
    createProxyMiddleware({
      target: 'http://localhost:8080',	// ì„œë²„ URL or localhost:ì„¤ì •í•œí¬íŠ¸ë²ˆí˜¸
      changeOrigin: true,
    })
  );
};
ì´ë ‡ê²Œ ì„¤ì •ì„ ì™„ë£Œí•˜ì˜€ìœ¼ë©´ '/api'ë¡œ ìš”ì²­ì„ ë³´ë‚´ê²Œë˜ë©´, Spring ì„œë²„ë¡œ ìš”ì²­ì´ ë„ì°©í•˜ê²Œ ëœë‹¤.

âš¡ï¸ í†µì‹  í…ŒìŠ¤íŠ¸
ì´ì œ í”„ë¡ íŠ¸(React)ì™€ ë°±ì—”ë“œ(Spring)ì˜ í†µì‹ ì´ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ”ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ì˜ˆì •ì´ë‹¤. í…ŒìŠ¤íŠ¸ì— ì‚¬ìš© ë  ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Axiosì´ë‹¤.

// Axios ì„¤ì¹˜
npm install axios --save
ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì•„ë˜ ì½”ë“œë¥¼ App.jsì— ì‘ì„±í•´ì£¼ì.

import {useEffect, useState} from "react";
import axios from "axios";

function App() {
    const [hello, setHello] = useState('');

    useEffect(() => {
        axios.get('/api/test')
            .then((res) => {
                setHello(res.data);
            })
    }, []);
    return (
        <div className="App">
            ë°±ì—”ë“œ ë°ì´í„° : {hello}
        </div>
    );
}

export default App;
ë‹¤ìŒìœ¼ë¡œëŠ” Springìœ¼ë¡œ ì´ë™í•˜ì—¬ Controllerë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì.

package com.demo.demoproject.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

    @GetMapping("/api/test")
    public String hello() {
        return "í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.";
    }
}
êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.


ì´ì œ ë‘ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•´ë³´ê² ë‹¤. ë¨¼ì € Springì„ ê°€ë™ì‹œì¼œì£¼ê³  Reactë¥¼ ê°€ë™ì‹œì¼œë³´ì.



ë‘ í”„ë¡œì íŠ¸ ëª¨ë‘ ì˜ ë™ì‘í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.

âš¡ï¸ ë¹Œë“œ
ì´ì œ ëª¨ë“  ì„¤ì • ë° í…ŒìŠ¤íŠ¸ê°€ ëë‚¬ìœ¼ë‹ˆ ë¹Œë“œ í›„ ë°°í¬í–ˆì„ ë•Œ ì˜ ë™ì‘í•˜ëŠ”ì§€ ì•Œì•„ë³´ì. ì°¸ê³ ë¡œ ê°œë°œí™˜ê²½ê³¼ ë°°í¬ í™˜ê²½ì€ ë‹¤ë¥¸ ê²½ìš°ë“¤ì´ ë§ê¸° ë•Œë¬¸ì— ë°°í¬ë¥¼í•´ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³  ê°œë°œì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ê³µë“¤ì—¬ì„œ ê°œë°œì„ ë‹¤ í•´ë†¨ëŠ”ë° ë°°í¬ ë‹¨ê³„ì—ì„œ ê°ˆì•„ì—ëŠ” ê²½ìš°ë“¤ì´ ìƒê¸´ë‹¤. ë¬¼ë¡  ì´ˆë³´ë¼ì„œ ì´ëŸ° ì‹¤ìˆ˜ë¥¼ í•˜ëŠ” ê²ƒì´ì§€ë§Œ ì´ ê¸€ì„ ì½ëŠ” ë¶„ë“¤ì€ ëŒ€ë¶€ë¶„ì´ ë‚˜ì™€ ê°™ì€ ì´ˆë³´ë¼ëŠ” ìƒê°ì„ í•˜ê¸° ë•Œë¬¸ì— ë…¸íŒŒì‹¬ì— ê°•ì¡°ë¥¼ í•œë²ˆí•˜ê³  ë„˜ì–´ê°€ê² ë‹¤.

build.gradle íŒŒì¼ì— í•˜ë‹¨ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì.

def frontendDir = "$projectDir/src/main/frontend"

sourceSets {
	main {
		resources { srcDirs = ["$projectDir/src/main/resources"]
		}
	}
}

processResources { dependsOn "copyReactBuildFiles" }

task installReact(type: Exec) {
	workingDir "$frontendDir"
	inputs.dir "$frontendDir"
	group = BasePlugin.BUILD_GROUP
	if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
		commandLine "npm.cmd", "audit", "fix"
		commandLine 'npm.cmd', 'install' }
	else {
		commandLine "npm", "audit", "fix" commandLine 'npm', 'install'
	}
}

task buildReact(type: Exec) {
	dependsOn "installReact"
	workingDir "$frontendDir"
	inputs.dir "$frontendDir"
	group = BasePlugin.BUILD_GROUP
	if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
		commandLine "npm.cmd", "run-script", "build"
	} else {
		commandLine "npm", "run-script", "build"
	}
}

task copyReactBuildFiles(type: Copy) {
	dependsOn "buildReact"
	from "$frontendDir/build"
	into "$projectDir/src/main/resources/static"
}
í•´ë‹¹ ì½”ë“œëŠ” Spring Boot í”„ë¡œì íŠ¸ê°€ ë¹Œë“œ ë  ë•Œ React í”„ë¡œì íŠ¸ë¥¼ ë¨¼ì € ë¹Œë“œí•˜ê³  ê²°ê³¼ë¥¼ Spring Boot í”„ë¡œì íŠ¸ì— í¬í•¨ì‹œí‚¤ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ì‘ì„±ì„ ì™„ë£Œí•˜ê³  í™ˆ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì—¬ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ì.

./gradlew build


ìœ„ì™€ ê°™ì€ í™”ë©´ì´ ë³´ì´ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì.

java -jar build/libs/demo-web-0.0.1-SNAPSHOT.jar


ìœ„ ì‚¬ì§„ì„ ë³´ë©´ í¬íŠ¸ë²ˆí˜¸ê°€ 8080ìœ¼ë¡œ ë°”ë€Œì–´ì ¸ ìˆëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ê°œë°œì„ í•˜ê³  ë‹¤ì‹œ ë¹Œë“œë¥¼ í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì´ë§Œ.ğŸ‘ŠğŸ½

